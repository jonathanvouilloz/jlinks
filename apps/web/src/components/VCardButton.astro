---
interface Props {
  slug: string;
}

const { slug } = Astro.props;
const apiUrl = import.meta.env.API_URL || 'http://localhost:3000';
const vcardUrl = `${apiUrl}/vcard/${slug}`;
---

<a href={vcardUrl} class="vcard-button" download aria-label="Télécharger la carte de contact">
  <svg
    width="20"
    height="20"
    viewBox="0 0 24 24"
    fill="none"
    stroke="currentColor"
    stroke-width="2"
    stroke-linecap="round"
    stroke-linejoin="round"
  >
    <path d="M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2"></path>
    <circle cx="9" cy="7" r="4"></circle>
    <line x1="19" y1="8" x2="19" y2="14"></line>
    <line x1="22" y1="11" x2="16" y2="11"></line>
  </svg>
  <span>Add to Contacts</span>
</a>

<style>
  .vcard-button {
    display: inline-flex;
    align-items: center;
    justify-content: center;
    gap: 0.5rem;
    padding: 0.75rem 1.5rem;
    border-radius: 2rem;
    font-size: 0.875rem;
    font-weight: 500;
    border: 1px solid currentColor;
    opacity: 0.7;
    transition: opacity 0.15s ease;
    margin: 2rem auto 0;
  }

  .vcard-button:hover {
    opacity: 1;
  }
</style>
