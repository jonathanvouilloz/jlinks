---
import en from '@noko/shared/i18n/en.json';
import fr from '@noko/shared/i18n/fr.json';

const locale = Astro.currentLocale || 'en';
const t = locale === 'fr' ? fr : en;

// Comparison table data
const features = [
  { key: 'links', linktreeFree: true, linktreePro: true, jlinks: true, label: t.landing_comparison_links },
  { key: 'customColors', linktreeFree: 'partial', linktreePro: true, jlinks: true, label: t.landing_comparison_custom_colors },
  { key: 'proThemes', linktreeFree: false, linktreePro: true, jlinks: '10', label: t.landing_comparison_pro_themes },
  { key: 'brandedQr', linktreeFree: false, linktreePro: true, jlinks: true, label: t.landing_comparison_branded_qr },
  { key: 'addContact', linktreeFree: false, linktreePro: false, jlinks: true, label: t.landing_comparison_add_contact },
  { key: 'customDomain', linktreeFree: false, linktreePro: true, jlinks: 'pro', label: t.landing_comparison_custom_domain },
  { key: 'analytics', linktreeFree: 'basic', linktreePro: true, jlinks: 'pro', label: t.landing_comparison_analytics },
  { key: 'noBranding', linktreeFree: false, linktreePro: true, jlinks: 'pro', label: t.landing_comparison_no_branding },
];
---

<section class="section comparison">
  <div class="container">
    <div class="text-center mb-16">
      <h2 class="section-title">{t.landing_comparison_title}</h2>
    </div>

    <div class="comparison-table-wrapper">
      <div class="comparison-table">
        <!-- Header row -->
        <div class="cell header"></div>
        <div class="cell header">{t.landing_comparison_others_free}</div>
        <div class="cell header header-row">
          {t.landing_comparison_others_pro}
          <span class="price-tag">$9+</span>
        </div>
        <div class="cell header noko-header">
          {t.landing_comparison_noko}
        </div>

        <!-- Feature rows -->
        {features.map((feature) => (
          <>
            <div class="cell feature-label">
              {feature.label}
            </div>
            <div class="cell">
              {feature.linktreeFree === true && <span class="check">✓</span>}
              {feature.linktreeFree === false && <span class="cross">✕</span>}
              {feature.linktreeFree === 'partial' && <span class="partial">~</span>}
              {feature.linktreeFree === 'basic' && <span class="text-sm text-secondary">{t.landing_comparison_basic}</span>}
            </div>
            <div class="cell">
              {feature.linktreePro === true && <span class="check">✓</span>}
              {feature.linktreePro === false && <span class="cross">✕</span>}
            </div>
            <div class="cell noko-col">
              {feature.jlinks === true && <span class="check-white">✓</span>}
              {feature.jlinks === false && <span class="cross-white">✕</span>}
              {feature.jlinks === '10' && <span class="check-white">✓ (10)</span>}
              {feature.jlinks === 'pro' && <span class="text-sm font-bold text-white">{t.landing_comparison_pro}</span>}
            </div>
          </>
        ))}

        <!-- Price row -->
        <div class="cell feature-label price-label">
          {t.landing_comparison_price}
        </div>
        <div class="cell">
          <span class="price">$0</span>
        </div>
        <div class="cell">
          <span class="price">$9<span class="period">/mo</span></span>
        </div>
        <div class="cell noko-col noko-footer">
          <span class="price text-white">0</span>
        </div>
      </div>
    </div>

    <div class="text-center mt-8">
      <p class="section-subtitle" set:html={t.landing_comparison_subtitle}></p>
    </div>
  </div>
</section>

<style>
  .comparison-table-wrapper {
    overflow-x: auto;
    padding-bottom: 1rem;
  }

  .comparison-table {
    display: grid;
    grid-template-columns: 1.5fr 1fr 1fr 1fr;
    gap: 1px;
    background: var(--color-border);
    border: 1px solid var(--color-border);
    border-radius: var(--radius-xl);
    overflow: hidden;
    min-width: 600px;
  }

  .cell {
    background: white;
    padding: 1rem;
    display: flex;
    align-items: center;
    justify-content: center;
    text-align: center;
  }

  .cell.header {
    background: var(--color-bg);
    font-weight: 700;
    color: var(--color-text);
    padding: 1.5rem 1rem;
    display: flex;
    flex-direction: column;
    gap: 0.5rem;
  }

  .cell.header.header-row {
    flex-direction: row;
    align-items: center;
    justify-content: center;
    white-space: nowrap;
  }

  .cell.feature-label {
    justify-content: flex-start;
    text-align: left;
    font-weight: 500;
    color: var(--color-text-secondary);
  }

  /* Noko Column Styles */
  .cell.noko-col, .cell.noko-header, .cell.noko-footer {
    background: var(--color-primary);
    color: white;
    /* Hack to cover the grid gap lines */
    box-shadow: 0 0 0 1px var(--color-primary);
    z-index: 1;
    position: relative;
  }
  
  .cell.noko-header {
    font-size: 1.25rem;
    font-weight: 800;
  }
  
  .cell.noko-footer {
    border-bottom-right-radius: var(--radius-xl);
  }

  .price-tag {
    font-size: 0.75rem;
    background: #fef3c7;
    color: #92400e;
    padding: 2px 8px;
    border-radius: 99px;
  }

  .check { color: var(--color-success); font-weight: bold; }
  .cross { color: var(--color-text-muted); }
  .partial { color: var(--color-warning); font-weight: bold; }

  /* White variations for Noko column */
  .check-white { color: white; font-weight: bold; }
  .cross-white { color: rgba(255, 255, 255, 0.4); }
  .text-white { color: white !important; }

  .price {
    font-weight: 700;
    font-size: 1.125rem;
  }
  
  .period {
    font-size: 0.75rem;
    color: var(--color-text-secondary);
    font-weight: 400;
  }

  .text-secondary { color: var(--color-text-secondary); }
  .text-primary { color: var(--color-primary); }
  .font-bold { font-weight: 700; }
  .text-sm { font-size: 0.875rem; }
</style>